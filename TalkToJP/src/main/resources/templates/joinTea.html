<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
<title>선생님 회원가입</title>
<!-- Required meta tags -->
<meta charset="utf-8">
<meta name="viewport"
	content="width=device-width, initial-scale=1, shrink-to-fit=no">

<!-- Bootstrap CSS -->
<link rel="stylesheet"
	href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
	integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z"
	crossorigin="anonymous">
	
	  <!-- 헤더 스타일 추가 -->
	<link rel="stylesheet" type="text/css" th:href="@{/css/header.css}">

	<!-- Bootstrap CSS -->
    <link rel="stylesheet" type="text/css" th:href="@{/bootstrap.min.css}">		

	<script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script>	
	
</head>
<body>
	<!-- 헤더추가 -->
    <th:block th:replace="~{headerMem :: headerMem}"></th:block>

<div style="height: 100px;"></div>
<div class="container">
	<div class="row justify-content-center">
		<div class="col-md-6">
			<form id="registrationForm" action="/mydata/joinTeaInsert" method="post" enctype="multipart/form-data" class="form">
				<div class="row justify-content-center">
					<h1 style="text-align: center">선생님 등록하기</h1>
					<p></p>
					<p></p>
					<p>◆ 선생님으로 등록하려면 선생님 프로필 작성이 필요합니다.</p>
				</div>
				<div class="form-group">
					<label>프로필 사진</label>
				
					<div id="imageContainer" class="form-group overflow-hidden mx-auto"></div>

					</div>
					
						<input type="file" 
						   id="t_picture" 
						   name="picture"
						   class="form-control" required>
					<p id="pictureInput"></p>
					
					
					<label>아이디</label>
					<input type="text" 
						   id="m_id" 
						   name="tid"
						   th:value="${id}"
						   class="form-control"
						   readonly="readonly">
					<p id="idInput"></p>
								
					<label>선생님 닉네임</label>
					<input type="text" 
						   id="t_name" 
						   name="tname"
						   class="form-control"
						   placeholder="선생님 닉네임을 적어주세요." required>
					<p id="nameInput"></p>
					
					<label>선생님 자기소개</label>
					<textarea rows="4px" cols=""
					id="m_content"
					name="content"
					class="form-control"
					placeholder="선생님 자기소개를 적어주세요." required></textarea>
					
					<!-- 어드민값 설정 -->
					<input type="hidden" 
						   name="admin"
						   value="2">
						   
						   <br><br>
						   
						   <button
							type="submit"
							class="btn btn-primary btn-block" style="background-color:#ff8d5b; border-color:#ff8d5b;">작성 완료</button>
				</form>
				<br><br><br>
				</div>		
		</div>
	</div>


<!-- 선택된 파일 비동기로 이미지 뿌리기  -->	
<script type="text/javascript">
	document.getElementById('t_picture').addEventListener('change', function(event) {
	  const file = event.target.files[0];
	  const reader = new FileReader();
	
	  reader.onload = function() {
	    const imageData = reader.result;
	    const imageElement = document.createElement('img');
	    imageElement.src = imageData;
	    imageElement.style.width = '100%';
	    imageElement.style.height = '100%';
	    imageElement.style.objectFit = 'cover'; // 이미지가 원형으로 잘리도록 설정
	    imageElement.style.borderRadius = '50%'; // 원형으로 잘리는 이미지의 테두리 설정
	    
	    const container = document.getElementById('imageContainer');
	    container.innerHTML = '';
	    container.style.width = '500px'; // div의 가로 크기 설정
	    container.style.height = '500px'; // div의 세로 크기 설정
	    container.style.overflow = 'hidden'; // 내부 내용이 넘치는 경우를 처리하기 위해 overflow 속성 추가
	    container.appendChild(imageElement);
	  };
	
	  reader.readAsDataURL(file);
	});
		
	$("#registrationForm").submit(function(event) {
	    event.preventDefault(); //기본 제출 동작 방지

	    var confirmed = confirm("선생님 가입을 진행하시겠습니까?");

        if (confirmed) {
        
       		document.getElementById("registrationForm").submit(); //양식 제출
       		alert("선생님 가입이 완료되었습니다.")

        }else{
        	return false;
        }
	    
	});
	
	
	
</script>



</body>
</html>
